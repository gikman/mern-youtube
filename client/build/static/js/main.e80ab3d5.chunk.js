(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{696:function(e,t,a){},858:function(e,t,a){},859:function(e,t,a){},860:function(e,t,a){},864:function(e,t,a){"use strict";a.r(t);a(307),a(318),a(319),a(320),a(321),a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(462),a(463),a(464),a(465),a(466),a(467),a(468),a(469),a(470),a(335),a(472),a(473),a(197),a(474),a(475),a(476),a(477),a(478),a(479),a(480),a(481),a(482),a(483),a(484),a(485),a(486),a(487),a(488),a(490),a(491),a(493),a(494),a(344),a(199),a(495),a(496),a(497),a(498),a(499),a(500),a(501),a(502),a(503),a(504),a(505),a(506),a(507),a(508),a(509),a(510),a(349),a(511),a(512),a(513),a(514),a(515),a(516),a(517),a(518),a(519),a(521),a(522),a(524),a(525),a(526),a(527),a(528),a(529),a(530),a(531),a(532),a(533),a(534),a(535),a(536),a(537),a(538),a(539),a(540),a(541),a(542),a(270),a(544),a(545),a(546),a(547),a(548),a(550),a(551),a(552),a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(361),a(561),a(562),a(272),a(563),a(564),a(565),a(566),a(207),a(567),a(568),a(569),a(570),a(571),a(572),a(573),a(574),a(575),a(576),a(577),a(578),a(579),a(580),a(581),a(582),a(583),a(584),a(585),a(586),a(587),a(588),a(589),a(590),a(591),a(592),a(594),a(595),a(596),a(597),a(598),a(599),a(600),a(601),a(602),a(603),a(604),a(605),a(606),a(607),a(608),a(609),a(610),a(611),a(612),a(613),a(614),a(615),a(616),a(617),a(618),a(619),a(620),a(621),a(622),a(623),a(624),a(625),a(626),a(277),a(627),a(628),a(630),a(631),a(632),a(633),a(634),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(637),a(638),a(639),a(640),a(641),a(642),a(643),a(644),a(645),a(646),a(647),a(648),a(649),a(650),a(651),a(652),a(654),a(656),a(657),a(658),a(659),a(660),a(661),a(662),a(663),a(664),a(665),a(387),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(666),a(667),a(668),a(670),a(406),a(407),a(408),a(672),a(673),a(674),a(675),a(676),a(677),a(678),a(679),a(410),a(680),a(681),a(682),a(684),a(412);var s=a(2),i=(a(687),a(413),a(0)),r=a.n(i),n=a(8),c=a.n(n),o=(a(696),a(39)),l=a(42),d=a(298),u=a.n(d),j=a(440),b=a(23),m=a.n(b),h="login_user",p="register_user",O="auth_user",x="logout_user",f="/api/users";function g(){var e=m.a.get("".concat(f,"/auth")).then((function(e){return e.data}));return{type:O,payload:e}}var v=a(44),y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function r(r){var n=Object(v.c)((function(e){return e.user})),c=Object(v.b)();return Object(i.useEffect)((function(){c(g()).then(function(){var e=Object(j.a)(u.a.mark((function e(s){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,!s.payload.isAuth;case 2:if(!e.sent){e.next=6;break}t&&r.history.push("/register_login"),e.next=7;break;case 6:(a&&!s.payload.isAdmin||!1===t)&&r.history.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[c,r.history,n.googleAuth]),Object(s.jsx)(e,Object(l.a)(Object(l.a)({},r),{},{user:n}))}return r},w=a(21),S=a(870),I=a(868),k=a(86),C=a(865),N=a(157),F=a(104),_=a.n(F),L=S.a.Title,T=I.a.Meta;var P=function(){var e=Object(i.useState)([]),t=Object(w.a)(e,2),a=t[0],r=t[1];Object(i.useEffect)((function(){m.a.get("/api/video/getVideos").then((function(e){e.data.success?(console.log(e.data.videos),r(e.data.videos)):alert("Failed to get Videos")}))}),[]);var n=a.map((function(e,t){var a=Math.floor(e.duration/60),i=Math.floor(e.duration-60*a);return Object(s.jsxs)(k.a,{lg:6,md:8,xs:24,children:[Object(s.jsx)("div",{style:{position:"relative",margin:"2rem auto 0 auto",width:"100%"},children:Object(s.jsxs)("a",{href:"/video/".concat(e._id),children:[Object(s.jsx)("img",{style:{width:"100%"},alt:"thumbnail",src:"http://localhost:5000/".concat(e.thumbnail)}),Object(s.jsx)("div",{className:" duration",style:{bottom:0,right:0,position:"absolute",margin:"4px",color:"#fff",backgroundColor:"rgba(17, 17, 17, 0.8)",opacity:.8,padding:"2px 4px",borderRadius:"2px",letterSpacing:"0.5px",fontSize:"12px",fontWeight:"500",lineHeight:"12px"},children:Object(s.jsxs)("span",{children:[a," : ",i]})})]})}),Object(s.jsx)("br",{}),Object(s.jsx)(T,{avatar:Object(s.jsx)(C.a,{src:e.writer.image}),title:e.title}),Object(s.jsxs)("span",{children:[e.writer.name," "]}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{style:{marginLeft:"3rem"},children:[" ",e.views]}),"- ",Object(s.jsxs)("span",{children:[" ",_()(e.createdAt).format("MMM Do YY")," "]})]})}));return Object(s.jsxs)("div",{style:{width:"85%",margin:"3rem auto"},children:[Object(s.jsx)(L,{level:2,style:{margin:"3rem auto"},children:" Recommended "}),Object(s.jsx)(N.a,{gutter:16,children:n})]})},E=a(244),D=a(80),A=a(869),M=a(874),q=a(15),V=a(872),R=a(304),z=S.a.Title;var B=Object(o.f)((function(e){var t=Object(v.b)(),a=!!localStorage.getItem("rememberMe"),r=Object(i.useState)(""),n=Object(w.a)(r,2),c=n[0],o=n[1],l=Object(i.useState)(a),d=Object(w.a)(l,2),u=d[0],j=d[1],b=function(){j(!u)},p=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return Object(s.jsx)(E.a,{initialValues:{email:p,password:""},validationSchema:D.a().shape({email:D.c().email("Email is invalid").required("Email is required"),password:D.c().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,s){var i=s.setSubmitting;setTimeout((function(){var s={email:a.email,password:a.password};t(function(e){var t=m.a.post("".concat(f,"/login"),e).then((function(e){return e.data}));return{type:h,payload:t}}(s)).then((function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),!0===u?window.localStorage.setItem("rememberMe",a.id):localStorage.removeItem("rememberMe"),e.history.push("/")):o("Check out your Account or Password again")})).catch((function(e){o("Check out your Account or Password again"),setTimeout((function(){o("")}),3e3)})),i(!1)}),500)},children:function(e){var t=e.values,a=e.touched,i=e.errors,r=(e.dirty,e.isSubmitting),n=e.handleChange,o=e.handleBlur,l=e.handleSubmit;e.handleReset;return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(z,{level:2,children:"Log In"}),Object(s.jsxs)("form",{onSubmit:l,style:{width:"350px"},children:[Object(s.jsxs)(A.a.Item,{required:!0,children:[Object(s.jsx)(M.a,{id:"email",prefix:Object(s.jsx)(q.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:t.email,onChange:n,onBlur:o,className:i.email&&a.email?"text-input error":"text-input"}),i.email&&a.email&&Object(s.jsx)("div",{className:"input-feedback",children:i.email})]}),Object(s.jsxs)(A.a.Item,{required:!0,children:[Object(s.jsx)(M.a,{id:"password",prefix:Object(s.jsx)("div",{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:n,onBlur:o,className:i.password&&a.password?"text-input error":"text-input"}),i.password&&a.password&&Object(s.jsx)("div",{className:"input-feedback",children:i.password})]}),c&&Object(s.jsx)("label",{children:Object(s.jsx)("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"},children:c})}),Object(s.jsxs)(A.a.Item,{children:[Object(s.jsx)(V.a,{id:"rememberMe",onChange:b,checked:u,children:"Remember me"}),Object(s.jsx)("a",{className:"login-form-forgot",href:"/reset_user",style:{float:"right"},children:"forgot password"}),Object(s.jsx)("div",{children:Object(s.jsx)(R.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:r,onSubmit:l,children:"Log in"})}),"Or ",Object(s.jsx)("a",{href:"/register",children:"register now!"})]})]})]})}})})),W={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},Y={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var U=function(e){var t=Object(v.b)();return Object(s.jsx)(E.a,{initialValues:{email:"",lastName:"",name:"",password:"",confirmPassword:""},validationSchema:D.a().shape({name:D.c().required("Name is required"),lastName:D.c().required("Last Name is required"),email:D.c().email("Email is invalid").required("Email is required"),password:D.c().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:D.c().oneOf([D.b("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,s){var i=s.setSubmitting;setTimeout((function(){var s={email:a.email,password:a.password,name:a.name,lastname:a.lastname,image:"http://gravatar.com/avatar/".concat(_()().unix(),"?d=identicon")};t(function(e){var t=m.a.post("".concat(f,"/register"),e).then((function(e){return e.data}));return{type:p,payload:t}}(s)).then((function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)})),i(!1)}),500)},children:function(e){var t=e.values,a=e.touched,i=e.errors,r=(e.dirty,e.isSubmitting),n=e.handleChange,c=e.handleBlur,o=e.handleSubmit;e.handleReset;return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)("h2",{children:"Sign up"}),Object(s.jsxs)(A.a,Object(l.a)(Object(l.a)({style:{minWidth:"375px"}},W),{},{onSubmit:o,children:[Object(s.jsxs)(A.a.Item,{required:!0,label:"Name",children:[Object(s.jsx)(M.a,{id:"name",placeholder:"Enter your name",type:"text",value:t.name,onChange:n,onBlur:c,className:i.name&&a.name?"text-input error":"text-input"}),i.name&&a.name&&Object(s.jsx)("div",{className:"input-feedback",children:i.name})]}),Object(s.jsxs)(A.a.Item,{required:!0,label:"Last Name",children:[Object(s.jsx)(M.a,{id:"lastName",placeholder:"Enter your Last Name",type:"text",value:t.lastName,onChange:n,onBlur:c,className:i.lastName&&a.lastName?"text-input error":"text-input"}),i.lastName&&a.lastName&&Object(s.jsx)("div",{className:"input-feedback",children:i.lastName})]}),Object(s.jsxs)(A.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:i.email&&a.email?"error":"success",children:[Object(s.jsx)(M.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:n,onBlur:c,className:i.email&&a.email?"text-input error":"text-input"}),i.email&&a.email&&Object(s.jsx)("div",{className:"input-feedback",children:i.email})]}),Object(s.jsxs)(A.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:i.password&&a.password?"error":"success",children:[Object(s.jsx)(M.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:n,onBlur:c,className:i.password&&a.password?"text-input error":"text-input"}),i.password&&a.password&&Object(s.jsx)("div",{className:"input-feedback",children:i.password})]}),Object(s.jsxs)(A.a.Item,{required:!0,label:"Confirm",hasFeedback:!0,children:[Object(s.jsx)(M.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:n,onBlur:c,className:i.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),i.confirmPassword&&a.confirmPassword&&Object(s.jsx)("div",{className:"input-feedback",children:i.confirmPassword})]}),Object(s.jsx)(A.a.Item,Object(l.a)(Object(l.a)({},Y),{},{children:Object(s.jsx)(R.a,{onClick:o,type:"primary",disabled:r,children:"Submit"})}))]}))]})}})},X=a(871);var H=function(e){return Object(s.jsxs)(X.a,{mode:e.mode,children:[Object(s.jsx)(X.a.Item,{children:Object(s.jsx)("a",{href:"/",children:"Video"})},"mail"),Object(s.jsx)(X.a.Item,{children:Object(s.jsx)("a",{href:"/subscription",children:"Subscription"})},"subscription")]})};a(858);var J=Object(o.f)((function(e){var t=Object(v.c)((function(e){return e.user}));return t.userData&&!t.userData.isAuth?Object(s.jsxs)(X.a,{mode:e.mode,children:[Object(s.jsx)(X.a.Item,{children:Object(s.jsx)("a",{href:"/login",children:"Signin"})},"mail"),Object(s.jsx)(X.a.Item,{children:Object(s.jsx)("a",{href:"/register",children:"Signup"})},"app")]}):Object(s.jsxs)(X.a,{mode:e.mode,children:[Object(s.jsx)(X.a.Item,{children:Object(s.jsx)("a",{href:"/video/upload",className:"uploadimg",children:Object(s.jsx)("img",{src:"https://i.ibb.co/yP5bspz/upload.png",alt:""})})},"create"),Object(s.jsx)(X.a.Item,{children:Object(s.jsx)("a",{onClick:function(){m.a.get("".concat(f,"/logout")).then((function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")}))},children:"Logout"})},"logout")]})})),$=a(873);a(859);var G=function(){var e=Object(i.useState)(!1),t=Object(w.a)(e,2),a=t[0],r=t[1];return Object(s.jsxs)("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"},children:[Object(s.jsx)("div",{className:"menu__logo",children:Object(s.jsx)("a",{href:"/",children:Object(s.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/YouTube_Logo_2017.svg/1280px-YouTube_Logo_2017.svg.png",alt:""})})}),Object(s.jsxs)("div",{className:"menu__container",children:[Object(s.jsx)("div",{className:"menu_left",children:Object(s.jsx)(H,{mode:"horizontal"})}),Object(s.jsx)("div",{className:"menu_rigth",children:Object(s.jsx)(J,{mode:"horizontal"})}),Object(s.jsx)(R.a,{className:"menu__mobile-button",type:"primary",onClick:function(){r(!0)},children:Object(s.jsx)(q.a,{type:"align-right"})}),Object(s.jsxs)($.a,{title:"Basic Drawer",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){r(!1)},visible:a,children:[Object(s.jsx)(H,{mode:"inline"}),Object(s.jsx)(J,{mode:"inline"})]})]})]})};var K=function(){return Object(s.jsx)("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}})},Q=a(458),Z=S.a.Title,ee=M.a.TextArea,te=[{value:0,label:"Public"},{value:1,label:"Private"}],ae=[{value:0,label:"Film & Animation"},{value:0,label:"Autos & Vehicles"},{value:0,label:"Music"},{value:0,label:"Pets & Animals"},{value:0,label:"Sports"}];var se=function(e){var t=Object(v.c)((function(e){return e.user})),a=Object(i.useState)(""),r=Object(w.a)(a,2),n=r[0],c=r[1],o=Object(i.useState)(""),d=Object(w.a)(o,2),u=d[0],j=d[1],b=Object(i.useState)(0),h=Object(w.a)(b,2),p=h[0],O=h[1],x=Object(i.useState)("Film & Animation"),f=Object(w.a)(x,2),g=f[0],y=f[1],S=Object(i.useState)(""),I=Object(w.a)(S,2),k=I[0],C=I[1],N=Object(i.useState)(""),F=Object(w.a)(N,2),_=F[0],L=F[1],T=Object(i.useState)(""),P=Object(w.a)(T,2),E=P[0],D=P[1],V=function(a){if(a.preventDefault(),t.userData&&!t.userData.isAuth)return alert("Please Log in First");if(""===n||""===u||""===g||""===k||""===_||""===E)return alert("Please first fill all the fields");var s={writer:t.userData._id,title:n,description:u,privacy:p,filePath:k,category:g,duration:_,thumbnail:E};m.a.post("/api/video/uploadVideo",s).then((function(t){t.data.success?(alert("video Uploaded Successfully"),e.history.push("/")):alert("Failed to upload video")}))};return Object(s.jsxs)("div",{style:{maxWidth:"700px",margin:"2rem auto"},children:[Object(s.jsx)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:Object(s.jsx)(Z,{level:2,children:" Upload Video"})}),Object(s.jsxs)(A.a,{onSubmit:V,style:{margin:"2rem"},children:[Object(s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"0 auto"},children:[Object(s.jsx)(Q.a,{onDrop:function(e){var t=new FormData;console.log(e),t.append("file",e[0]),m.a.post("/api/video/uploadfiles",t,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.data.success){var t={filePath:e.data.filePath,fileName:e.data.fileName};C(e.data.filePath),m.a.post("/api/video/thumbnail",t).then((function(e){e.data.success?(L(e.data.fileDuration),D(e.data.thumbsFilePath)):alert("Failed to make the thumbnails")}))}else alert("failed to save the video in server")}))},multiple:!1,maxSize:8e8,children:function(e){var t=e.getRootProps,a=e.getInputProps;return Object(s.jsxs)("div",Object(l.a)(Object(l.a)({style:{width:"300px",height:"240px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},t()),{},{children:[Object(s.jsx)("input",Object(l.a)({},a())),Object(s.jsx)(q.a,{type:"plus",style:{fontSize:"3rem"}})]}))}}),""!==E&&Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:"http://localhost:5000/".concat(E),alt:"haha",style:{width:"100%"}})})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{children:"Title"}),Object(s.jsx)(M.a,{onChange:function(e){c(e.currentTarget.value)},value:n}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{children:"Description"}),Object(s.jsx)(ee,{onChange:function(e){console.log(e.currentTarget.value),j(e.currentTarget.value)},value:u}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("select",{onChange:function(e){O(e.currentTarget.value)},children:te.map((function(e,t){return Object(s.jsx)("option",{value:e.value,children:e.label},t)}))}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("select",{onChange:function(e){y(e.currentTarget.value)},children:ae.map((function(e,t){return Object(s.jsx)("option",{value:e.label,children:e.label},t)}))}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)(R.a,{type:"primary",size:"large",onClick:V,children:"Submit"})]})]})},ie=a(867);var re=function(){var e=Object(i.useState)([]),t=Object(w.a)(e,2),a=t[0],n=t[1];Object(i.useEffect)((function(){m.a.get("/api/video/getVideos").then((function(e){e.data.success?(console.log(e.data.videos),n(e.data.videos)):alert("Failed to get Videos")}))}),[]);var c=a.map((function(e,t){var a=Math.floor(e.duration/60),i=Math.floor(e.duration-60*a);return Object(s.jsxs)("div",{style:{display:"flex",marginTop:"1rem",padding:"0 2rem"},children:[Object(s.jsx)("div",{style:{width:"100%",marginRight:"1rem"},children:Object(s.jsx)("a",{href:"/video/".concat(e._id),style:{color:"gray"},children:Object(s.jsx)("img",{style:{width:"100%"},src:"http://localhost:5000/".concat(e.thumbnail),alt:"thumbnail"})})}),Object(s.jsx)("div",{style:{width:"50%"},children:Object(s.jsxs)("a",{href:"/video/".concat(e._id),style:{color:"gray"},children:[Object(s.jsxs)("span",{style:{fontSize:"1rem",color:"black"},children:[e.title,"  "]}),Object(s.jsx)("br",{}),Object(s.jsx)("span",{children:e.writer.name}),Object(s.jsx)("br",{}),Object(s.jsx)("span",{children:e.views}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{children:[a," : ",i]}),Object(s.jsx)("br",{})]})})]})}));return Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)("div",{style:{marginTop:"3rem"}}),c]})};var ne=function(e){var t=e.userTo,a=e.userFrom,r=Object(i.useState)(0),n=Object(w.a)(r,2),c=n[0],o=n[1],l=Object(i.useState)(!1),d=Object(w.a)(l,2),u=d[0],j=d[1];return Object(i.useEffect)((function(){var e={userTo:t,userFrom:a};m.a.post("/api/subscribe/subscribeNumber",e).then((function(e){e.data.success?o(e.data.subscribeNumber):alert("Failed to get subscriber Number")})),m.a.post("/api/subscribe/subscribed",e).then((function(e){e.data.success?j(e.data.subcribed):alert("Failed to get Subscribed Information")}))}),[]),Object(s.jsx)("div",{children:Object(s.jsxs)("button",{onClick:function(){var e={userTo:t,userFrom:a};u?m.a.post("/api/subscribe/unSubscribe",e).then((function(e){e.data.success?(o(c-1),j(!u)):alert("Failed to unsubscribe")})):m.a.post("/api/subscribe/subscribe",e).then((function(e){e.data.success?(o(c+1),j(!u)):alert("Failed to subscribe")}))},style:{backgroundColor:"".concat(u?"#AAAAAA":"#CC0000"),borderRadius:"4px",color:"white",padding:"10px 16px",fontWeight:"500",fontSize:"1rem",textTransform:"uppercase"},children:[c," ",u?"Subscribed":"Subscribe"]})})},ce=a(866),oe=a(189);var le=function(e){var t=Object(i.useState)(0),a=Object(w.a)(t,2),n=a[0],c=a[1],o=Object(i.useState)(0),l=Object(w.a)(o,2),d=l[0],u=l[1],j=Object(i.useState)(null),b=Object(w.a)(j,2),h=b[0],p=b[1],O=Object(i.useState)(null),x=Object(w.a)(O,2),f=x[0],g=x[1],v={};return v=e.video?{videoId:e.videoId,userId:e.userId}:{commentId:e.commentId,userId:e.userId},Object(i.useEffect)((function(){m.a.post("/api/like/getLikes",v).then((function(t){console.log("getLikes",t.data),t.data.success?(c(t.data.likes.length),t.data.likes.map((function(t){t.userId===e.userId&&p("liked")}))):alert("Failed to get likes")})),m.a.post("/api/like/getDislikes",v).then((function(t){console.log("getDislike",t.data),t.data.success?(u(t.data.dislikes.length),t.data.dislikes.map((function(t){t.userId===e.userId&&g("disliked")}))):alert("Failed to get dislikes")}))}),[]),Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsxs)("span",{children:[Object(s.jsx)(oe.a,{title:"Like",children:Object(s.jsx)(q.a,{type:"like",theme:"liked"===h?"filled":"outlined",onClick:function(){null===h?m.a.post("/api/like/upLike",v).then((function(e){e.data.success?(c(n+1),p("liked"),null!==f&&(g(null),u(d-1))):alert("Failed to increase the like")})):m.a.post("/api/like/unLike",v).then((function(e){e.data.success?(c(n-1),p(null)):alert("Failed to decrease the like")}))}})}),Object(s.jsx)("span",{style:{paddingLeft:"8px",cursor:"auto"},children:n})]},"comment-basic-like"),"\xa0\xa0",Object(s.jsxs)("span",{children:[Object(s.jsx)(oe.a,{title:"Dislike",children:Object(s.jsx)(q.a,{type:"dislike",theme:"disliked"===f?"filled":"outlined",onClick:function(){null!==f?m.a.post("/api/like/unDisLike",v).then((function(e){e.data.success?(u(d-1),g(null)):alert("Failed to decrease dislike")})):m.a.post("/api/like/upDisLike",v).then((function(e){e.data.success?(u(d+1),g("disliked"),null!==h&&(p(null),c(n-1))):alert("Failed to increase dislike")}))}})}),Object(s.jsx)("span",{style:{paddingLeft:"8px",cursor:"auto"},children:d})]},"comment-basic-dislike")]})},de=M.a.TextArea;var ue=function(e){var t=Object(v.c)((function(e){return e.user})),a=Object(i.useState)(""),r=Object(w.a)(a,2),n=r[0],c=r[1],o=Object(i.useState)(!1),l=Object(w.a)(o,2),d=l[0],u=l[1],j=function(a){a.preventDefault();var s={writer:t.userData._id,postId:e.postId,responseTo:e.comment._id,content:n};m.a.post("/api/comment/saveComment",s).then((function(t){t.data.success?(c(""),u(!d),e.refreshFunction(t.data.result)):alert("Failed to save Comment")}))},b=[Object(s.jsx)(le,{comment:!0,commentId:e.comment._id,userId:localStorage.getItem("userId")}),Object(s.jsx)("span",{onClick:function(){u(!d)},children:"Reply to "},"comment-basic-reply-to")];return Object(s.jsxs)("div",{children:[Object(s.jsx)(ce.a,{actions:b,author:e.comment.writer.name,avatar:Object(s.jsx)(C.a,{src:e.comment.writer.image,alt:"image"}),content:Object(s.jsx)("p",{children:e.comment.content})}),d&&Object(s.jsxs)("form",{style:{display:"flex"},onSubmit:j,children:[Object(s.jsx)(de,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){c(e.currentTarget.value)},value:n,placeholder:"write some comments"}),Object(s.jsx)("br",{}),Object(s.jsx)(R.a,{style:{width:"20%",height:"52px"},onClick:j,children:"Submit"})]})]})};var je=function e(t){var a,n=Object(i.useState)(0),c=Object(w.a)(n,2),o=c[0],l=c[1],d=Object(i.useState)(!1),u=Object(w.a)(d,2),j=u[0],b=u[1];return Object(i.useEffect)((function(){var e=0;t.CommentLists.map((function(a){a.responseTo===t.parentCommentId&&e++})),l(e)}),[t.CommentLists,t.parentCommentId]),Object(s.jsxs)("div",{children:[o>0&&Object(s.jsxs)("p",{style:{fontSize:"14px",margin:0,color:"gray"},onClick:function(){b(!j)},children:["View ",o," more comment(s)"]}),j&&(a=t.parentCommentId,t.CommentLists.map((function(i,n){return Object(s.jsx)(r.a.Fragment,{children:i.responseTo===a&&Object(s.jsxs)("div",{style:{width:"80%",marginLeft:"40px"},children:[Object(s.jsx)(ue,{comment:i,postId:t.postId,refreshFunction:t.refreshFunction}),Object(s.jsx)(e,{CommentLists:t.CommentLists,parentCommentId:i._id,postId:t.postId,refreshFunction:t.refreshFunction})]})})})))]})},be=(a(860),M.a.TextArea);var me=function(e){var t=Object(v.c)((function(e){return e.user})),a=Object(i.useState)(""),n=Object(w.a)(a,2),c=n[0],o=n[1],l=function(a){a.preventDefault();var s={content:c,writer:t.userData._id,postId:e.postId};m.a.post("/api/comment/saveComment",s).then((function(t){t.data.success?(o(""),e.refreshFunction(t.data.result)):alert("Failed to save Comment")}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("br",{}),Object(s.jsx)("p",{children:" replies"}),Object(s.jsx)("hr",{}),console.log(e.CommentLists),e.CommentLists&&e.CommentLists.map((function(t,a){return!t.responseTo&&Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)(ue,{comment:t,postId:e.postId,refreshFunction:e.refreshFunction}),Object(s.jsx)(je,{CommentLists:e.CommentLists,postId:e.postId,parentCommentId:t._id,refreshFunction:e.refreshFunction})]})})),Object(s.jsxs)("form",{style:{display:"flex"},onSubmit:l,children:[Object(s.jsx)(be,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){o(e.currentTarget.value)},value:c,placeholder:"write some comments"}),Object(s.jsx)("br",{}),Object(s.jsx)(R.a,{style:{width:"20%",height:"52px"},onClick:l,children:Object(s.jsx)("div",{className:"submitcomment",children:"Submit"})})]})]})};var he=function(e){var t=Object(v.c)((function(e){return e.user})),a=e.match.params.videoId,r=Object(i.useState)([]),n=Object(w.a)(r,2),c=n[0],o=n[1],l=Object(i.useState)([]),d=Object(w.a)(l,2),u=d[0],j=d[1],b={videoId:a};return Object(i.useEffect)((function(){m.a.post("/api/video/getVideo",b).then((function(e){e.data.success?(console.log(e.data.video),o(e.data.video)):alert("Failed to get video Info")})),m.a.post("/api/comment/getComments",b).then((function(e){e.data.success?(console.log("response.data.comments",e.data.comments),j(e.data.comments)):alert("Failed to get video Info")}))}),[]),c.writer?Object(s.jsxs)(N.a,{children:[Object(s.jsx)(k.a,{lg:18,xs:24,children:Object(s.jsxs)("div",{className:"postPage",style:{width:"100%",padding:"3rem 4em"},children:[Object(s.jsx)("video",{style:{width:"100%"},src:"http://localhost:5000/".concat(c.filePath),controls:!0}),Object(s.jsxs)(ie.a.Item,{actions:[Object(s.jsx)(le,{video:!0,videoId:a,userId:localStorage.getItem("userId")}),Object(s.jsx)(ne,{userTo:c.writer._id,userFrom:localStorage.getItem("userId")})],children:[Object(s.jsx)(ie.a.Item.Meta,{avatar:Object(s.jsx)(C.a,{src:c.writer&&c.writer.image}),title:Object(s.jsx)("a",{href:"https://ant.design",children:c.title}),description:c.description}),Object(s.jsx)("div",{})]}),t.userData._id?Object(s.jsx)(me,{CommentLists:u,postId:c._id,refreshFunction:function(e){j(u.concat(e))}}):Object(s.jsx)("h3",{children:"Sign in to comment"})]})}),Object(s.jsx)(k.a,{lg:6,xs:24,children:Object(s.jsx)(re,{})})]}):Object(s.jsx)("div",{children:"Loading..."})},pe=S.a.Title,Oe=I.a.Meta;var xe=function(){var e=Object(i.useState)([]),t=Object(w.a)(e,2),a=t[0],r=t[1],n={userFrom:localStorage.getItem("userId")};Object(i.useEffect)((function(){m.a.post("/api/video/getSubscriptionVideos",n).then((function(e){e.data.success?r(e.data.videos):alert("Failed to get subscription videos")}))}),[]);var c=a.map((function(e,t){var a=Math.floor(e.duration/60),i=Math.floor(e.duration-60*a);return Object(s.jsxs)(k.a,{lg:6,md:8,xs:24,children:[Object(s.jsx)("div",{style:{position:"relative"},children:Object(s.jsxs)("a",{href:"/video/".concat(e._id),children:[Object(s.jsx)("img",{style:{width:"100%"},alt:"thumbnail",src:"http://localhost:5000/".concat(e.thumbnail)}),Object(s.jsx)("div",{className:" duration",style:{bottom:0,right:0,position:"absolute",margin:"4px",color:"#fff",backgroundColor:"rgba(17, 17, 17, 0.8)",opacity:.8,padding:"2px 4px",borderRadius:"2px",letterSpacing:"0.5px",fontSize:"12px",fontWeight:"500",lineHeight:"12px"},children:Object(s.jsxs)("span",{children:[a," : ",i]})})]})}),Object(s.jsx)("br",{}),Object(s.jsx)(Oe,{avatar:Object(s.jsx)(C.a,{src:e.writer.image}),title:e.title}),Object(s.jsxs)("span",{children:[e.writer.name," "]}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{style:{marginLeft:"3rem"},children:[" ",e.views]}),"- ",Object(s.jsxs)("span",{children:[" ",_()(e.createdAt).format("MMM Do YY")," "]})]})}));return Object(s.jsxs)("div",{style:{width:"85%",margin:"3rem auto"},children:[Object(s.jsx)(pe,{level:2,style:{margin:"3rem auto"},children:" Subscribed Videos "}),Object(s.jsx)(N.a,{gutter:16,children:c})]})};var fe=function(){return Object(s.jsxs)(i.Suspense,{fallback:Object(s.jsx)("div",{children:"Loading..."}),children:[Object(s.jsx)(G,{}),Object(s.jsx)("div",{style:{paddingTop:"69px",minHeight:"calc(100vh - 80px)"},children:Object(s.jsxs)(o.c,{children:[Object(s.jsx)(o.a,{exact:!0,path:"/",component:y(P,null)}),Object(s.jsx)(o.a,{exact:!0,path:"/login",component:y(B,!1)}),Object(s.jsx)(o.a,{exact:!0,path:"/register",component:y(U,!1)}),Object(s.jsx)(o.a,{exact:!0,path:"/video/upload",component:y(se,!0)}),Object(s.jsx)(o.a,{exact:!0,path:"/video/:videoId",component:y(he,null)}),Object(s.jsx)(o.a,{exact:!0,path:"/subscription",component:y(xe,null)})]})}),Object(s.jsx)(K,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge=a(182),ve=a(131),ye=Object(ve.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(l.a)(Object(l.a)({},e),{},{register:t.payload});case h:return Object(l.a)(Object(l.a)({},e),{},{loginSucces:t.payload});case O:return Object(l.a)(Object(l.a)({},e),{},{userData:t.payload});case x:return Object(l.a)({},e);default:return e}}}),we=a(456),Se=a.n(we),Ie=a(457),ke=Object(ve.a)(Se.a,Ie.a)(ve.d);c.a.render(Object(s.jsx)(v.a,{store:ke(ye,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(s.jsx)(ge.a,{children:Object(s.jsx)(fe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[864,1,2]]]);
//# sourceMappingURL=main.e80ab3d5.chunk.js.map